trigger:
- master  # or "main" if your default branch is named that

pool:
  name: Default  # or replace with your self-hosted agent pool name

steps:
- task: UseDotNet@2
  inputs:
    version: '8.0.x'
    includePreviewVersions: true

- script: dotnet build StringExtensionsLibrary/StringExtensionsLibrary.csproj
  displayName: 'Build Project'

- script: dotnet pack StringExtensionsLibrary/StringExtensionsLibrary.csproj -o $(Build.ArtifactStagingDirectory)
  displayName: 'Pack NuGet Package'

- script: dotnet nuget push "$(Build.ArtifactStagingDirectory)/*.nupkg" --source "string-extension-feed" --api-key AzureArtifacts
  displayName: 'Push to Azure Artifacts Feed'
